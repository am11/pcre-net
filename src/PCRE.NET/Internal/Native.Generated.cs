//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Runtime.InteropServices;
using System.Security;

namespace PCRE.Internal
{
    unsafe partial class Native
    {
        public static int get_error_message(int errorCode, char* errorBuffer, uint bufferSize)
            => _impl.get_error_message(errorCode, errorBuffer, bufferSize);

        public static void compile(ref compile_input input, out compile_result result)
            => _impl.compile(ref input, out result);

        public static void code_free(IntPtr code)
            => _impl.code_free(code);

        public static int pattern_info(IntPtr code, uint key, void* data)
            => _impl.pattern_info(code, key, data);

        public static int config(uint key, void* data)
            => _impl.config(key, data);

        public static void match(ref match_input input, out match_result result)
            => _impl.match(ref input, out result);


        private abstract class LibImpl
        {
            public abstract int get_error_message(int errorCode, char* errorBuffer, uint bufferSize);
            public abstract void compile(ref compile_input input, out compile_result result);
            public abstract void code_free(IntPtr code);
            public abstract int pattern_info(IntPtr code, uint key, void* data);
            public abstract int config(uint key, void* data);
            public abstract void match(ref match_input input, out match_result result);
        }

        [SuppressUnmanagedCodeSecurity]
        private class WinImpl : LibImpl
        {
            public override int get_error_message(int errorCode, char* errorBuffer, uint bufferSize)
                => pcrenet_get_error_message(errorCode, errorBuffer, bufferSize);

            [DllImport("PCRE.NET.Native.dll")]
            private static extern int pcrenet_get_error_message(int errorCode, char* errorBuffer, uint bufferSize);

            public override void compile(ref compile_input input, out compile_result result)
                => pcrenet_compile(ref input, out result);

            [DllImport("PCRE.NET.Native.dll")]
            private static extern void pcrenet_compile(ref compile_input input, out compile_result result);

            public override void code_free(IntPtr code)
                => pcrenet_code_free(code);

            [DllImport("PCRE.NET.Native.dll")]
            private static extern void pcrenet_code_free(IntPtr code);

            public override int pattern_info(IntPtr code, uint key, void* data)
                => pcrenet_pattern_info(code, key, data);

            [DllImport("PCRE.NET.Native.dll")]
            private static extern int pcrenet_pattern_info(IntPtr code, uint key, void* data);

            public override int config(uint key, void* data)
                => pcrenet_config(key, data);

            [DllImport("PCRE.NET.Native.dll")]
            private static extern int pcrenet_config(uint key, void* data);

            public override void match(ref match_input input, out match_result result)
                => pcrenet_match(ref input, out result);

            [DllImport("PCRE.NET.Native.dll")]
            private static extern void pcrenet_match(ref match_input input, out match_result result);

        }

        [SuppressUnmanagedCodeSecurity]
        private class Win32Impl : LibImpl
        {
            public override int get_error_message(int errorCode, char* errorBuffer, uint bufferSize)
                => pcrenet_get_error_message(errorCode, errorBuffer, bufferSize);

            [DllImport("PCRE.NET.Native.x86.dll")]
            private static extern int pcrenet_get_error_message(int errorCode, char* errorBuffer, uint bufferSize);

            public override void compile(ref compile_input input, out compile_result result)
                => pcrenet_compile(ref input, out result);

            [DllImport("PCRE.NET.Native.x86.dll")]
            private static extern void pcrenet_compile(ref compile_input input, out compile_result result);

            public override void code_free(IntPtr code)
                => pcrenet_code_free(code);

            [DllImport("PCRE.NET.Native.x86.dll")]
            private static extern void pcrenet_code_free(IntPtr code);

            public override int pattern_info(IntPtr code, uint key, void* data)
                => pcrenet_pattern_info(code, key, data);

            [DllImport("PCRE.NET.Native.x86.dll")]
            private static extern int pcrenet_pattern_info(IntPtr code, uint key, void* data);

            public override int config(uint key, void* data)
                => pcrenet_config(key, data);

            [DllImport("PCRE.NET.Native.x86.dll")]
            private static extern int pcrenet_config(uint key, void* data);

            public override void match(ref match_input input, out match_result result)
                => pcrenet_match(ref input, out result);

            [DllImport("PCRE.NET.Native.x86.dll")]
            private static extern void pcrenet_match(ref match_input input, out match_result result);

        }

        [SuppressUnmanagedCodeSecurity]
        private class Win64Impl : LibImpl
        {
            public override int get_error_message(int errorCode, char* errorBuffer, uint bufferSize)
                => pcrenet_get_error_message(errorCode, errorBuffer, bufferSize);

            [DllImport("PCRE.NET.Native.x64.dll")]
            private static extern int pcrenet_get_error_message(int errorCode, char* errorBuffer, uint bufferSize);

            public override void compile(ref compile_input input, out compile_result result)
                => pcrenet_compile(ref input, out result);

            [DllImport("PCRE.NET.Native.x64.dll")]
            private static extern void pcrenet_compile(ref compile_input input, out compile_result result);

            public override void code_free(IntPtr code)
                => pcrenet_code_free(code);

            [DllImport("PCRE.NET.Native.x64.dll")]
            private static extern void pcrenet_code_free(IntPtr code);

            public override int pattern_info(IntPtr code, uint key, void* data)
                => pcrenet_pattern_info(code, key, data);

            [DllImport("PCRE.NET.Native.x64.dll")]
            private static extern int pcrenet_pattern_info(IntPtr code, uint key, void* data);

            public override int config(uint key, void* data)
                => pcrenet_config(key, data);

            [DllImport("PCRE.NET.Native.x64.dll")]
            private static extern int pcrenet_config(uint key, void* data);

            public override void match(ref match_input input, out match_result result)
                => pcrenet_match(ref input, out result);

            [DllImport("PCRE.NET.Native.x64.dll")]
            private static extern void pcrenet_match(ref match_input input, out match_result result);

        }

    }
}
